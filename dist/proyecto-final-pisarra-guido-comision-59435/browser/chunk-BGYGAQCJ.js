import{s as R}from"./chunk-UM3USEKK.js";import{h as L,i as N,l as P,m as T,n as j}from"./chunk-BUIY3QUJ.js";import{b as x,ma as U,ta as r}from"./chunk-W43C5WKI.js";import{Hb as _,Pb as l,Qb as a,Yb as h,a as u,ca as f,fa as d,hb as I,ic as o,ka as b,kb as p,kc as S,lb as g,pa as C,rc as y,s as c,tc as E,va as M,x as v,ya as D}from"./chunk-YTEZ3TT7.js";var m=class n{transform(t,...e){let i=t.firstName+" "+t.lastName;return e[0]==="uppercase"?`${i}`.toUpperCase():i}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=D({name:"studentFullName",type:n,pure:!0})};var O=class n{constructor(t,e){this.dialogRef=t;this.data=e}onClose(){this.dialogRef.close()}onImageError(t){t.target.src="../../../../../assets/avatars/noImage.jpg"}static \u0275fac=function(e){return new(e||n)(g(L),g(N))};static \u0275cmp=M({type:n,selectors:[["app-student-detail-modal"]],decls:17,vars:6,consts:[["mat-dialog-title",""],[1,"dialog-header"],["alt","Avatar",1,"avatar",3,"error","src"],["mat-dialog-content",""],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"]],template:function(e,i){e&1&&(l(0,"h2",0)(1,"div",1)(2,"img",2),h("error",function(F){return i.onImageError(F)}),a(),o(3," Alumno "),a()(),l(4,"div",3)(5,"p")(6,"strong"),o(7,"Nombre y apellido:"),a(),o(8),y(9,"studentFullName"),a(),l(10,"p")(11,"strong"),o(12,"Email:"),a(),o(13),a()(),l(14,"div",4)(15,"button",5),h("click",function(){return i.onClose()}),o(16,"Cerrar"),a()()),e&2&&(p(2),_("src",i.data.avatarUrl||i.data.avatarUrl=="",I),p(6),S(" ",E(9,3,i.data,"uppercase"),""),p(5),S(" ",i.data.email,""))},dependencies:[U,P,j,T,m],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center}.avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;margin-right:10px;object-fit:cover}"]})};var $=class n{constructor(t){this._httpClient=t}baseURL=R.baseURL;students=[];getStudents(){return this._httpClient.get(`${this.baseURL}/students`).pipe(v(t=>t.filter(e=>e.role!=="admin")),d(t=>this.students=t))}addStudent(t){return this._httpClient.post(`${this.baseURL}/students`,t).pipe(d(e=>this.students=[...this.students,e]))}updateStudentById(t,e){return this._httpClient.patch(`${this.baseURL}/students/${t}`,e).pipe(d(i=>{this.students=this.students.map(s=>s.id.toString()===t?u(u({},s),i):s)}),f(()=>c(this.students)))}deleteStudentById(t){return this._httpClient.delete(`${this.baseURL}/students/${t}`).pipe(d(()=>{this.students=this.students.filter(e=>e.id.toString()!==t)}),f(()=>c(this.students)))}static \u0275fac=function(e){return new(e||n)(C(x))};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})};var Y=r.compose([r.required,r.minLength(3),r.pattern(/^[a-zA-ZáéíóúÁÉÍÓÚüÜñÑ\s]+$/)]),tt=r.compose([r.required,r.email]);export{Y as a,tt as b,m as c,O as d,$ as e};
